<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Red Shelf</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Charis+SIL&display=swap" rel="stylesheet">
    <link rel="icon" href="../bookstall-or-library-icon-in-red-and-blue-color-vector.png" sizes="32X32">

    <style>
        .charis-sil-regular {
            font-family: "Charis SIL", serif;
            font-weight: 400;
            font-style: normal;
        }
        body{
            padding-left: 10vw;
            padding-right: 10vw;
        }
    </style>
</head>
<body class="charis-sil-regular">
    <center><h1><span style="color: red;">Red Shelf</span> Documentation</h1></center>
    <p>
        This project will be about making the 3D catalog of the library whcihb includes to make the search engine on the librayr. So here the user might enter the website and search for a book in the library exact location of the book in the racks of library. And this will include me to use three js and javascripot again. I may dive into database managament and see if I can use SQL to make the website more faster. 
    </p>
    <p>
        Interactive 3D Book Locator for P. K. Kelkar Library, IIT Kanpur
        The Red Shelf is a web-based library navigation system designed to help users quickly locate physical books inside the large and complex layout of the P. K. Kelkar Library. Instead of relying only on shelf codes or floor numbers, the system provides a visual, spatial wayfinding experience using an interactive 3D model of the library.
        Users search for a book by title, author, or identifier through a simple search interface. The backend queries catalog data and maps the book to its corresponding physical bookshelf. The frontend then displays a 3D model of the library, where the target bookshelf is dynamically highlighted in red, allowing users to visually understand the exact location of the book. This makes physical navigation faster, especially for new users and large collections.
        The system is built using Three.js for real-time 3D visualization and Blender for modeling the library layout and shelves. A Node.js + Express backend handles search requests and data flow, while PostgreSQL is used to maintain a relational mapping between books and their physical shelf locations. The project is designed to integrate with the institute’s existing library catalog infrastructure and is optimized for use on mobile devices as well as desktops.
        The Red Shelf focuses on clarity, usability, and performance rather than visual excess, ensuring that the experience remains lightweight and accessible. The project demonstrates the application of full-stack web development, database design, and 3D visualization to solve a real, campus-scale problem and is intended to be handed over as a functional tool for institutional use.
    </p>
    <hr>
    <h2>Phases of this project</h2>
    <p>
        This project will be excuted in three phases. And they are as follows:<br>
        <ol>
            <li>
                <b>Modelling: </b>I will have to build the model of this library, an dfor this I will first take many pictures of my own library. After whcih i will make the model in bledner. I will also take the pictures of my shelfs and there IDs. Names of the model in blender has to given carefully. FOr this phases I am giving myself three days. One day to get the refrences and setting up the idea, and the rest two days to model the whole library. This is schedules to be executed on 16th January to 18th January.
            </li>
            <li>
                <b>Front-End</b> : This will not be the for the first time that i will be used thre js to make this. The Front-End of the website will be kept minimal. I will add the search bar where I will be aksing for the ID of each book. And thats it. So all that the front end will contain is the <b>Search bar</b>, and <b>Library model</b>, and also space for the title of this project. Along with the footer with links to this documentation, code, and also link to my personal website, damn it!
            </li>
            <li>
                <b>Back-End : </b>This will be the tough part. The backend will be made in <b>node.js</b> and also <b>PostgreSQl</b>. node js tp send the query to databse, and PostgreSQl to retrieve the data from the database. This will be my first expereice with Database.
                <br>
                Once the location of the bookshelf is retirved, I will remove the search bar, make the library's opacity very low, and the bookshelf inside it will be made to appear somewhat dim, and then the bookshelf where you would find the book will be turned <b>Red</b>. Hence the name Red Shelf.
            </li>
        </ol>
    </p>
    <hr>
    <h2>Phase 1: Modelling</h2>
    <h4><u>16/1/26</u></h4>
    <p>
        I have just now came taking some pictures of the library. And the link to all the pictures of library is given below. And after seeing the library closely, which I haven't done even though I have visited it multiple times, I see that it's architecture is magnificent. The complexity, and unsymmetricity in the desing makes me wonder how could some one even imagine this. The architect of our library is <a target="_blank" href="https://en.wikipedia.org/wiki/Achyut_Kanvinde"><b>Achyut Kanvinde</b></a>. I don't have words to describe how great his work is. Truly Amaaazing a work and an Amaaazing Architect! I have linked all the downloadable pictures of the library that I will be using as reference, below.<br>
        <center><a style="border: 5px solid black; padding: 2px;" href="./Media.zip">Download (700MB)</a></center>
    </p>
    <p>
        From tommorrow onwards, I will start modelling the library. So the plan it to make the model as low poly as possilbe, and visit the library later on perfecting the model with small details. But I dont aim to have a perfect model ready by tomorrow.
    </p>
    <hr>
    <h4><u>17/1/26</u></h4>
    <p>
        Ok so today, I got wasted. I am feeling very low from the start of this day. nothing seems to be working out. I am feeling very low. This might be the lowest poitn in my life. But I don't want to make this documentation a personal diary. So I will meet you tomorrow. And whether or not I start modelling will depend on my mood tomorrow.
    </p>
    <p>
        Ok, so I tried making the library and I had gotten everything right, and as soon as the adrenaline rushed, my file got deleted due to Blender crashing. I got fucked up. This was very annoying. Hours of work got deleted instantly. I had almost completely made the entire outer part of the library before it fucked me.
    </p>
    <p>
        Ok, so I put some more time in and made the model again. Now here are the results. As I proceed with the modeling, it becomes more and more easier, and more and more interesting. I have made more than what I expected.
        Here are the images.<br>
        <center>
            <img src="./Screenshots/Back.png" width="75%">
            <img src="./Screenshots/Joints.png" width="75%">
            <img src="./Screenshots/Isometric.png" width="75%">
            <img src="./Screenshots/Side.png" width="75%">
            <img src="./Screenshots/Sides.png" width="75%">
        </center><br>
    </p>
    <hr>
    <h4><u>18/1/26</u></h4>
    <p>
        I am completely satisfied by today’s work. I have successfully made almost the entire exterior of our library, and now is the time when I will be building the interior, since that is why this application will be used. So today, I have completed the exterior except for the handles for the stairs and the staircase at the other side of the library. And apart from that, everything is done, along with the first implementation of Three.js. So with that, I will show some of the results that I have done today. I have also added an opening animation to make it look good, but haven’t added the search bar and the footer. I will be adding that in the next schedule.
    </p>
    <p>
        <h4>Blender file</h4><br>
        <center>
            <img src="./Screenshots/Blend1.png" alt="" width="75%">
            <img src="./Screenshots/Blend2.png" alt="" width="75%">
            <img src="./Screenshots/Blender3.png" alt="" width="75%">
            <img src="./Screenshots/Blend4.png" alt="" width="75%">
        </center><br>
        <h4>The Website (First Appearance)</h4><br>
        <center>
            <img src="./Screenshots/Web1.png" alt="" width="75%">
            <img src="./Screenshots/Web2.png" alt="" width="75%">
            <img src="./Screenshots/Web3.png" alt="" width="75%">
            <img src="./Screenshots/Web4.png" alt="" width="75%">
        </center><br>
    </p>
    <p>
        So today, now that I have completely made the model and its website, next week I will work on perfecting the model and also working on the front end. So the task that is left is to make the frontend, which includes making the search bar and the footer, and also fixing the animation of the opening page of the website. And then the most important part is to name the shelves of the website. And then one thing I am thinking to do is use <b>GSAP</b> and make the user experience the interior of the library too. And this will give them an immersive experience to travel to the bookshelf. I will make the interior as minimal as possible.
    </p>
    <p>
        So here is the flow. The user will click a start button and then he will see the website starting along with the animation. And then he will see the search bar, where he will put the ID of the book. And then after phase three of the project is completed, the user will see the bookshelf of that book turning red. So after that, the user has the option to use the GSAP method and actually travel along the path through the interior to get to the bookshelf. And once he clicks the first “flag,” he will be locked in the position of the camera, but he can rotate. And then he will click the next flag, and likewise he can travel to the bookshelf. So when he is locked in the GSAP, he will be allowed to go back to the normal view (global orbital), and during the GSAP mode, he will not be able to change the location of the camera, only the rotation. This will not allow the user to move into the mesh.
    </p>
    <hr>
    <h4><u>19/1/26</u></h4>
    <p>
        So today,I have added the search bar which will take in the ID of the book, and have also added the footer, the headign of the app. GIven below is the picture of the application. I also fixed the footer to become responsive.<br>
        <center>
            <img src="./Screenshots/Web5.png" alt="" width="50%">
        </center>
    </p>

    <hr>
    <h4><u>21/1/26</u></h4>
    <p>
        I have done a lot of work today. I successfully animated the camera using GSAP. I added red-colored location icons, and when they are clicked, the camera animates to those locations, allowing the user to explore the library from the inside. My aim is to build on this and allow the user to navigate all the way to the final bookshelf they are looking for. The GitHub repository has also been updated, and the application is now live. The app is hosted on Vercel. I usually host all frontend websites on Vercel and use Render for the backend—just a recommendation.
        <center>
            <img src="./Screenshots/Web6.png" width="75%" alt="">
            <img src="./Screenshots/Web7.png" width="75%" alt="">
            <img src="./Screenshots/Web8.png" width="75%" alt="">
            <img src="./Screenshots/Web9.png" width="75%" alt="">
            <img src="./Screenshots/Web10.png" width="75%" alt="">
            <img src="./Screenshots/Web11.png" width="75%" alt="">
        </center>
    </p>
    <h4><u>26/1/26</u></h4>
    <p>
        AA lot of work has been done in these five days and I am going to explain them one by one. The first and major feature is the search. I have successfully added the search feature into the application, wherein now it is possible to search for a bookshelf, and for a dummy shelf system I have numbered them from 1 to 36.
    </p>
    <p>
        So the way this is done is I have named the bookshelf such that it matches their actual names that will be used to make their color red in Three.js. And then when the search button is clicked, I make the bookshelf which was entered by the user red. The user will enter any number from 1 to 36, and so as soon as it submits the form, the bookshelf will be turned red, and also I make the whole library translucent. Now one issue I was getting was that even if the opacity was turning down, it was not making the mesh behind it visible. I was still unable to see the bookshelf behind the walls, and so I added these two lines.<br>
        <div class="code" style="font-weight: 700; background-color: rgb(47, 47, 47); height: 200px; overflow-y: auto; overflow-x: auto; border: 1px solid black; color: aliceblue;">
           <pre><code >
    if (child.isMesh && child.name == 'Cube041') {
        child.material.transparent = true;
        
        gsap.to(
            child.material,
            {
                opacity : 0.5,
                duration : 1,
                onComplete : ()=>{
                    child.material.depthTest = true;
                    child.material.depthWrite = false;
                }
            }
        )
    }
        </code></pre> 
        </div>
        And it worked. Given below is the image of the library turning its opacity down, and the searched bookshelf (2) is clearly visible.
        <br>
        <center>
            <img src="./Screenshots/Opacity.png" width="75%" alt=""><br>
        </center>
        Another feature added was the use of <b>Geometry Instancing</b>. I thought this would not be required since there are no trees or models that need to be scattered, but then I quickly realised there are cycles. I had modelled each and every cycle initially, but then the size of the file reached 38 MB (>25 MB). So in order to bring it to 25 MB, I created a JSON file storing all the transformations of the instances of the cycle in it, and then used it to create the instance of the cycle in Three.js, saving me the memory of creating all the cycles individually. This has brought the size of the GLB file to 7 MB, which was a huge achievement.
        I later used geometry instancing in the cycle stand and air conditioner as well to save some memory. But this was before realising that instancing the cycle itself had brought the mesh size well below 25 MB.
    </p>
    <p>
        Another feature I have added is that now the user could actually navigate itself to the bookshelf, and for that I used the GSAP locations placed inside the library to guide the user. I still had the feeling that this might be too complicated, since the user might not have much patience to tap onto each of the points and so on. But I will take a look at it some other time. Here are the pictures of me navigating myself to some bookshelf.<br>
        <center>
            <img src="./Screenshots/About_to_tap_location.png" alt="" width="75%">
            <img src="./Screenshots/First_Point.png" width="75%"><br>
            <img src="./Screenshots/Second_Point.png" width="75%"><br>
            <img src="./Screenshots/Third_Point.png" width="75%"><br>
            <img src="./Screenshots/Forth_Point.png" width="75%"><br>
            <img src="./Screenshots/Fifth_Point.png" width="75%"><br>
            <img src="./Screenshots/Seventh_Point.png" width="75%"><br>
            <img src="./Screenshots/Eighth_Point.png" width="75%"><br>
            <img src="./Screenshots/Ninth_Point.png" width="75%"><br>
        </center>
        
    </p>
    <p>
        Another feature that is added is the refresh button. So now that I have added the search, going into the GSAP mode and coming back, I don’t want there to be the search button, since there is already a book to be found. And also I don’t want the user to not have the option to search another book. Actually, I could have kept the search visible, but that would mean that the library could never come back to its opaque state after the first search was made, since every time the user comes back from the GSAP mode, it will make the library translucent. And since translucent would mean more parts of the mesh have to be rendered, this actually makes the application slower. Considering that this also has to be run on smaller devices, I had no other option but to give the chance for the application to again show the opaque library. But I will think about this problem.
    </p>
    <p>
        And then finally, I would like to say that I have used the GSAP library a lot this time. Whether it is to change the opacity of the library, camera movement, or the movement of other HTML elements, all are animated using GSAP, which has made the work easier.
    </p>
    <p>
        And lastly, I have seen that having the controls with damping, made the application slower. And my experience with the <a target="_blank" href="https://threejs.org/editor/">three.js editor</a> said me that it is better to have the orbital controls with no damping. And thus I disabled the damping.<br>
        <div class="code" style="font-weight: 700; background-color: rgb(47, 47, 47); height: 200px; overflow-y: auto; overflow-x: auto; border: 1px solid black; color: aliceblue;">
        <pre>
            <code>
    //Reset the Controls
    //controls.enableDamping = true;
    //controls.dampingFactor = 0.05;
    controls.screenSpacePanning = false;
    controls.enablePan = false;
    controls.minDistance = 0;
    controls.maxDistance = 900;
    controls.maxPolarAngle = Math.PI / 2;
            </code>
        </pre>
        </div><br>
        And now the controls might seem to be sudden, but it has definitely saved the application from lagging to some extend.
    </p>
</body>
</html>
